# 财经新闻采集与展示需求（Flutter 前端 + Python 爬虫）

## 背景与目标
- 个人使用，无登录；单页展示最新财经新闻。
- 目标：手动拉取为主；默认拉取“今天”的新闻，可选择任意日期；提供来源、标题、摘要、发布时间、原文链接。

## 数据源
- 初始站点：新浪财经、东方财富、华尔街见闻、财联社（可扩展）。
- 抓取策略：优先 RSS/公开接口；如无则网页解析。需要自定义 User-Agent、限速、重试(3 次)。
- 去重逻辑：来源 + 标题 + 发布时间 作为主键；忽略完全重复。

## 功能需求
- 手动抓取：前端“刷新”按钮调用抓取接口。
- 日期选择：默认今日；可选日期参数请求对应日期新闻。
- 列表展示：按时间倒序；字段包含来源、标题(可点击跳转原文)、摘要、发布时间。
- 筛选/搜索：可选关键词过滤（前端输入，后端参数）。
- 状态提示：显示抓取中/成功/失败；展示本次拉取时间。
- 数据存储：不落地，不建库；每次请求实时抓取最新内容，内存临时去重。

## 前端（Flutter）
- 端形态：单页（ListView）。
- 组件：顶部 AppBar 含刷新按钮、关键字输入框；主体新闻卡片列表；底部浮动提示上次更新时间。
- 交互：下拉刷新触发抓取；点击标题打开浏览器；加载中用进度条/Toast。
- 样式：简洁浅色风格；来源标签突出；时间显示为本地时区 HH:mm。
- 错误/空态：抓取失败时显示提示并可重试；无数据时展示“暂无数据，请刷新”。

## 后端（Python 爬虫 + API）
- 结构：爬虫模块、去重（内存）模块、API 层。
- 语言/运行环境：Python 3.10+，requests/httpx + BeautifulSoup4 或 lxml；可选 aiohttp 做并发。
- 调度：无定时任务，全部依赖手动触发。
- API：本地运行的轻量 HTTP 服务（Flask/FastAPI）。
- 端点：
  - GET /health：健康检查。
  - POST /crawl：触发抓取；参数包括 date(YYYY-MM-DD，可选，默认今日)、keywords 数组（可选）。
  - GET /news?date=YYYY-MM-DD&keywords=...：返回对应日期的最新列表（实时抓取，无缓存）。
- 存储：不使用数据库；抓取结果仅在内存中去重和返回。
- 日志：记录每次抓取成功数/失败站点；错误栈保存到文件。

## 数据格式（返回示例）
```json
{
  "source": "华尔街见闻",
  "title": "美联储政策前瞻",
  "summary": "市场关注即将公布的通胀数据…",
  "url": "https://example.com/news/123",
  "published_at": "2026-01-11T07:55:00+08:00",
  "fetched_at": "2026-01-11T08:00:05+08:00"
}
```

## 安全与合规
- 遵守各站点 robots/使用条款；控制抓取频率，避免高频请求。
- 不存储用户数据；仅保存公开新闻。

## 部署与运行
- 本地运行：启动 Python 服务（手动触发，无定时）；Flutter 前端通过 http 请求本地/局域网服务。
- 启动顺序：先启动后端服务，再启动 Flutter 应用。
- 后续可选：Docker 化方便启动。
